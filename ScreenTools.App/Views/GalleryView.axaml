<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="ScreenTools.App.GalleryView"
        xmlns:local="clr-namespace:ScreenTools.App"
        Title="GalleryView"
        DataContext="{Binding $self}">
   <Grid Margin="30">
       <ProgressBar  Margin="0 10" Height="20" 
                     Minimum="0" Maximum="100" Value="{Binding LoadingProgress}"
                     IsVisible="{Binding IsLoading}" />
       <ScrollViewer VerticalScrollBarVisibility="Auto" IsVisible="{Binding !IsLoading}">
           <ItemsControl x:Name="ImageItems" ItemsSource="{Binding Images}">
               <ItemsControl.ItemsPanel>
                   <ItemsPanelTemplate>
                       <WrapPanel />
                   </ItemsPanelTemplate>
               </ItemsControl.ItemsPanel>
               <ItemsControl.DataTemplates>
                   <DataTemplate DataType="local:GalleryImage">
                       <Image 
                           Width="360" 
                           Margin="2"
                           Stretch="Uniform" 
                           Source="{Binding Bitmap}"
                           PointerPressed="GalleryImage_OnPointerPressed"/>
                   </DataTemplate>
               </ItemsControl.DataTemplates>
           </ItemsControl>
       </ScrollViewer>
   </Grid>
</Window>
